{
  "base": {
    "name": "nginx-pod",
    "labels": [
      {"key": "app", "value": "nginx"},
      {"key": "env", "value": "prod"}
    ],
    "namespace": "default",
    "restartPolicy": "Always"
  },
  "tolerations": [
    {
      "key": "node.kubernetes.io/unschedulable",
      "operator": "Exists",
      "effect": "NoSchedule"
    }
  ],
  "nodeScheduling": {
    "type": "nodeSelector",
    "nodeSelector": [
      {"key": "disktype", "value": "ssd"}
    ],
    "nodeAffinity": [
      {
        "key": "topology.kubernetes.io/zone",
        "operator": "In",
        "value": "us-west1-a"
      }
    ]
  },
  "volumes": [
    {
      "name": "config-volume",
      "type": "configMap",
      "configMapRefVolume": {
        "name": "nginx-config",
        "optional": false
      }
    },
    {
      "name": "nfs-storage",
      "type": "pvc",
      "PVCVolume": {
        "name": "nfs-pvc"
      }
    }
  ],
  "netWorking": {
    "hostNetwork": false,
    "dnsPolicy": "ClusterFirst",
    "dnsConfig": {
      "nameservers": ["8.8.8.8"]
    },
    "hostAliases": [
      {"key": "192.168.1.18", "value": "foo.local,bar.local"}
    ]
  },
  "initContainers": [
    {
      "name": "init-setup",
      "image": "busybox:latest",
      "command": ["sh", "-c", "echo Initializing..."],
      "volumeMounts": [
        {
          "mountName": "nfs-storage",
          "mountPath": "/mnt/data",
          "readOnly": false
        }
      ]
    }
  ],
  "containers": [
    {
      "name": "nginx",
      "image": "nginx:1.21-alpine",
      "imagePullPolicy": "IfNotPresent",
      "ports": [
        {
          "name": "http",
          "containerPort": 80,
          "hostPort": 0
        }
      ],
      "envs": [
        {
          "name": "NGINX_ENV",
          "value": "production",
          "type": "default"
        }
      ],
      "envsFrom": [
        {
          "name": "global-config",
          "refType": "configMap",
          "prefix": "CFG_"
        }
      ],
      "resources": {
        "enable": true,
        "memRequest": 256,
        "memLimit": 512,
        "cpuRequest": 100,
        "cpuLimit": 200
      },
      "volumeMounts": [
        {
          "mountName": "config-volume",
          "mountPath": "/etc/nginx/conf.d",
          "readOnly": true
        }
      ],
      "livenessProbe": {
        "enable": true,
        "type": "http",
        "httpGet": {
          "scheme": "HTTP",
          "path": "/healthz",
          "port": 80
        },
        "initialDelaySeconds": 10,
        "periodSeconds": 5
      }
    }
  ]
}